AEONPLN
vert: "#version 450\n"
"#ifdef VULKAN\n"
"layout(set = 0, binding = 0, std140)\n"
"#else\n"
"layout(binding = 0, std140)\n"
"uniform Matrices\n"
"#endif\n"
"{\n"
"      mat4 ModelMatrix;\n"
"      mat4 ProjectionMatrix;\n"
"      mat4 ViewMatrix;\n"
"};\n"
"\n"
"#ifdef VULKAN\n"
"layout(set = 2, binding = 0, std140)\n"
"#else\n"
"layout(binding = 2, std140)\n"
"#endif\n"
"uniform Skeleton\n"
"{\n"
"      mat4 skeleton[256];\n"
"};\n"
"\n"
"layout(location = 0) in vec3 VertexPosition;\n"
"layout(location = 1) in vec3 VertexNormal;\n"
"layout(location = 5) in uvec4 VertexWeightIndices;\n"
"layout(location = 6) in vec4 VertexWeights;\n"
"layout(location = 0) out vec3 LightIntensity;\n"
"\n"
"void main()\n"
"{\n"
"    const vec3 Kd = vec3( 1.0f, 1.0f, 1.0f );\n"
"    const vec3 Ld = vec3( 1.0f, 0.38823529411f, 0.27843137254f );\n"
"    if ( length ( VertexNormal ) != 0 )\n"
"    {\n"
"        vec3 tnorm = normalize ( mat3(ViewMatrix) * mat3(ModelMatrix) * VertexNormal );\n"
"        vec4 eyeCoords = ViewMatrix * ModelMatrix * vec4 ( VertexPosition, 1.0 );\n"
"        vec3 s = normalize ( -eyeCoords.xyz );\n"
"        LightIntensity = Ld * Kd * max ( dot ( s, tnorm ), 0.0 );\n"
"    }\n"
"    else\n"
"    {\n"
"        LightIntensity = Ld;\n"
"    }\n"
"\n"
"    vec4 weighted_position =\n"
"        ( skeleton[VertexWeightIndices[0]] * VertexWeights[0] * vec4 ( VertexPosition, 1 ) ) +\n"
"        ( skeleton[VertexWeightIndices[1]] * VertexWeights[1] * vec4 ( VertexPosition, 1 ) ) +\n"
"        ( skeleton[VertexWeightIndices[2]] * VertexWeights[2] * vec4 ( VertexPosition, 1 ) ) +\n"
"        ( skeleton[VertexWeightIndices[3]] * VertexWeights[3] * vec4 ( VertexPosition, 1 ) );\n"
"    gl_Position = ProjectionMatrix * ViewMatrix * ModelMatrix * vec4(weighted_position.xyz, 1.0);\n"
"}\n"
frag: "#version 450\n"
"layout ( location = 0 ) in vec3 LightIntensity;\n"
"layout ( location = 0 ) out vec4 FragColor;\n"
"void main()\n"
"{\n"
"    FragColor = vec4 ( LightIntensity, 1.0 );\n"
"}\n"
